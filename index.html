<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PokmTCGSearcher - Mikissito</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<!-- Nota: ruta relativa (sin slash inicial) para GitHub Pages -->
<script type="module" src="js/main.js" defer></script>

<body>
  <header class="topbar">
    <div class="brand">
      <img src="css/pokeball.svg" alt="logo" class="logo" />
      <h1>Base de datos de Pokemon TCG de Mikissito</h1>
    </div>
    <nav>
      <a href="lists.html" class="navbtn">Mis listas</a>
    </nav>
  </header>

  <main class="container">
    <!-- controles (igual que antes) -->
    <section class="controls" aria-label="Controles de búsqueda y filtros">
      <div class="row">
        <input id="searchName" placeholder="Buscar por nombre..." />
        <button id="buscarBtn" class="btn primary">Buscar</button>
      </div>

      <div class="row">
        <input id="cardNumber" placeholder="Número (ej: 25)" style="width:160px;" />
        <select id="expansionSelect">
          <option value="">Cargando expansiones...</option>
        </select>

        <select id="raritySelect">
          <option value="">Cualquier rareza</option>
          <option value="Common">Common</option>
          <option value="Uncommon">Uncommon</option>
          <option value="Rare">Rare</option>
          <option value="Rare Holo">Rare Holo</option>
          <option value="Ultra Rare">Ultra Rare</option>
          <option value="Secret Rare">Secret Rare</option>
          <option value="Rare Rainbow">Rare Rainbow</option>
        </select>

        <select id="variantFilter">
          <option value="all">Todas variantes</option>
          <option value="holo">Sólo Holo/Foil</option>
          <option value="tournament">Sólo Torneo/Promo</option>
        </select>
      </div>

      <div class="row">
        <label>Ordenar por:
          <select id="sortSelect">
            <option value="none">Por defecto</option>
            <option value="number">Número</option>
            <option value="name">Nombre</option>
            <option value="price">Precio</option>
          </select>
        </label>

        <label>Orden:
          <select id="sortOrder">
            <option value="desc">Desc</option>
            <option value="asc">Asc</option>
          </select>
        </label>

        <button id="filtrarBtn" class="btn">Aplicar filtros</button>
        <button id="clearBtn" class="btn ghost">Limpiar</button>
      </div>
    </section>

    <section id="cardsSection">
      <div id="cardsGrid" class="grid" aria-live="polite"></div>
    </section>
  </main>

  <!-- Modal detalle carta -->
  <div id="cardModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <button id="closeModal" class="modal-close">&times;</button>
      <div class="modal-body">
        <div class="modal-image">
          <!-- la imagen del modal la rellenará JS: usamos `data-src` para lazy si quieres -->
          <img id="modalImage" src="" alt="Carta grande" loading="lazy" decoding="async" />
        </div>
        <div class="modal-info">
          <h2 id="modalName"></h2>
          <p id="modalSet"></p>
          <p id="modalNumber"></p>
          <p id="modalRarity"></p>
          <p id="modalPrice"></p>
          <pre id="modalRaw" class="small mono"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- scripts: rutas relativas -->
  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/app.js"></script>

  <!-- registrar service worker para cache y stale-while-revalidate -->
  <script>
    if ('serviceWorker' in navigator) {
      // ruta relativa para GitHub Pages; evita usar '/sw.js' (apunta al root del dominio)
      navigator.serviceWorker.register('./sw.js').then(reg => {
        console.log('SW registrado:', reg.scope);
      }).catch(err => console.warn('SW registro falló:', err));
    }
  </script>
</body>
</html>
